<!DOCTYPE html>
<html>
  <head>
    <title>THE PILL</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html {font-family: sans-serif; text-align: center}
      body {display: inline-block; text-align: left}
      *:required {border: thin solid blue}
      footer {font-size: small}
    </style>
     <!-- carga el nucleo de firebase JS SDK -->
  <script src="https://wwwgstatic.com/firebasejs/8.3.1/firebase-app-js"></script>
<!--Agrega el manejo de autentificacion-->
<script src="https://wwwgstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
<script src="js/init.js"></script>

  </head>
  <body>
    <header>
      <h1>THE PILL</h1>
    </header>
    <form id="autentificacion" action="javascript:;">
      <p><em></em></p>
      <p>
        <label accesskey="N">
          Usuario<br>
          <input id="entradausuario" name="potencia" type="text" autofocus pattern=".{1,30}"
                 required maxlength="30" size="33"
                 placeholder="">
        </label>
           <p><em></em></p>
      <p>
          <label accesskey="m">
          contraseña<br>
          <input id="entradacontraseña" name="potencia" type="text" autofocus pattern=".{1,30}"
                 required maxlength="30" size="33"
                 placeholder="">
        </label>
             <p><em></em></p>
      <p>  
                    
          <input type="submit" value="sign in" onclick="javascript:ingresar();">
       
    
           <script>
             
            const auth = firebase.auth();
           
             const provider = new firebase.auth.GoogleAuthProvider();
            
             provider.setCustomParameters({prompt: "select_account"});
            
             auth.onAuthStateChanged(
             
               usuarioAuth =>{
                  if (usuarioAuth && usuarioAuth.email){
                      email.value=usuarioAuth.email;
                    nombre.value = usuarioAuth.displayName;
                    avatar.src = usuarioAuth.photoURL;
                  }
                  else {
                      auth.singInWithRedirect(provider);
                      
                  }
              } ,
              procesaError
             );
             asyc funtion terminaSesion(){
               try{
                 await auth.signOut();
               }catch (e) {
                 procesaError(e);
                         }
             }
      function procesaError(e){
      console.log(e);
        alert (e.message);
      }
      </script>
      
      
    </form>
    <footer>
      Copyright 2021 Examen
    </footer>
    <datalist id="navegadores">
      <option value="Internet Explorer">
      <option value="Chrome">
      <option value="Opera">
      <option value="Safari">
      <option value="Edge">
      <option value="FireFox">
    </datalist>
   </body>
  </html>
 

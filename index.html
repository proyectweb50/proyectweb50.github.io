<!DOCTYPE html>
<html>
  <head>
    <title>THE PILL</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- carga el nucleo de firebase JS SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app-js"></script>
<!--Agrega el manejo de autentificacion-->
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
<script src="js/init.js"></script>

  </head>
  <body>
    <header>
      <h1>THE PILL</h1>
    </header>
             <script>
             
            const auth = firebase.auth();
           
             const provider = new firebase.auth.GoogleAuthProvider();
            
             provider.setCustomParameters({prompt: "select_account"});
            
             auth.onAuthStateChanged(
             
               usuarioAuth =>{
                  if (usuarioAuth && usuarioAuth.email){
                      email.value=usuarioAuth.email;
                    nombre.value = usuarioAuth.displayName;
                    avatar.src = usuarioAuth.photoURL;
                  }
                  else {
                      auth.singInWithRedirect(provider);
                      
                  }
              } ,
              procesaError
             );
             async function terminaSesion(){
               try{
                 await auth.signOut();
               }catch (e) {
                 procesaError(e);
                         }
             }
      function procesaError(e){
      console.log(e);
        alert (e.message);
      }
      </script>
      
      
     <footer>
      Copyright 2021 Examen
    </footer>
 
   </body>
  </html>
 

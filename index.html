<!DOCTYPE html>
<html>
  <head>
    <title>THE PILL</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>THE PILL </title>
    <link rel="styleshhet" href="estilos.css">
    <!-- carga el nucleo de firebase JS SDK -->
  
   <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<!--Agrega el manejo de autentificacion-->
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
 

    <script src="js/init.js"></script>

  </head>
  <body>
    <header>
      <h1>THE PILL</h1>
    </header>
   
    <form action="ejemplo.php" method="get">
  <p>Usuario: <input type="text" name="nombre" size="40"></p>
  <p>Contrase√±a: <input type="number" name="nacido" min="1900"></p>
  
  <p>
    <input type="submit" value="acceder">
    <input type="submit" value="Registrar">
  </p>
</form>
    
    <script>
            const auth = firebase.auth();
           
      const provider = new firebase.auth.GoogleAuthProvider();      
      
            provider.setCustomParameters({ prompt: "select_account" });
            
            
auth.onAuthStateChanged(
             
               usuarioAuth =>{
                  if (usuarioAuth && usuarioAuth.email) {
                      
                    email.value = usuarioAuth.email;
                    
                    nombre.value = usuarioAuth.displayName;
                    
                    avatar.src = usuarioAuth.photoURL;
                  
                  }
                  else {
                     await auth.singInWithRedirect(provider);
                      
                  }
              } ,
              procesaError
             );
             async function terminaSesion(){
               try{
                 await auth.signOut();
               }catch (e) {
                 procesaError(e);
                         }
             }
      function procesaError(e){
      console.log(e);
        alert (e.message);
      }
      </script>
    </body>
  </html>
 
